{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n  return target;\n};\nvar _framesync = require('framesync');\nvar _calc = require('../inc/calc');\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nvar Action = function () {\n  // lawsuit - sorry\n  function Action() {\n    var _this = this;\n    var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _classCallCheck(this, Action);\n    this.scheduledUpdate = function () {\n      _this.lastUpdated = (0, _framesync.timeSinceLastFrame)();\n      _this.prev = _this.current;\n      var _props = _this.props,\n        onUpdate = _props.onUpdate,\n        passive = _props.passive;\n      if (_this.update) {\n        _this.current = _this.update(_this.current);\n      }\n      if (onUpdate) {\n        if (onUpdate.registerAction) {\n          onUpdate.set(_this.get());\n        } else {\n          onUpdate(_this.get(), _this);\n        }\n      }\n      _this.fireListeners();\n      if (!passive && _this._isActive) {\n        (0, _framesync.onFrameUpdate)(_this.scheduledUpdate);\n      }\n      if (_this.isActionComplete && _this.isActionComplete()) {\n        _this.complete();\n      }\n      return _this;\n    };\n    this.props = _extends({}, this.constructor.defaultProps);\n    this.setProps(props);\n    this.lastUpdated = 0;\n    this.prev = this.current = props.current || props.from || 0;\n  }\n  Action.prototype.start = function start() {\n    var _props2 = this.props,\n      onStart = _props2.onStart,\n      _onStart = _props2._onStart,\n      passive = _props2.passive;\n    if (!passive) {\n      this._isActive = true;\n      (0, _framesync.onFrameUpdate)(this.scheduledUpdate);\n    }\n    if (this.onStart) this.onStart();\n    if (onStart) onStart(this);\n    if (_onStart) _onStart(this);\n    return this;\n  };\n  Action.prototype.stop = function stop() {\n    var _props3 = this.props,\n      onStop = _props3.onStop,\n      _onStop = _props3._onStop,\n      passive = _props3.passive;\n    if (!passive) {\n      this._isActive = false;\n      (0, _framesync.cancelOnFrameUpdate)(this.scheduledUpdate);\n    }\n    if (this.onStop) this.onStop();\n    if (onStop) onStop(this);\n    if (_onStop) _onStop(this);\n    return this;\n  };\n  Action.prototype.complete = function complete() {\n    var _props4 = this.props,\n      onComplete = _props4.onComplete,\n      _onComplete = _props4._onComplete;\n    this.stop();\n    if (this.onComplete) this.onComplete();\n    if (onComplete) onComplete(this);\n    if (_onComplete) _onComplete(this);\n    return this;\n  };\n  Action.prototype.setProps = function setProps(_ref) {\n    var onUpdate = _ref.onUpdate,\n      props = _objectWithoutProperties(_ref, ['onUpdate']);\n    this.props = _extends({}, this.props, props);\n    if (onUpdate) this.output(onUpdate);\n    return this;\n  };\n  Action.prototype.output = function output(func) {\n    this.props.onUpdate = func;\n    if (func.registerAction) func.registerAction(this);\n    return this;\n  };\n  Action.prototype.get = function get() {\n    var transform = this.props.transform;\n    return transform ? transform(this.current) : this.current;\n  };\n  Action.prototype.getBeforeTransform = function getBeforeTransform() {\n    return this.current;\n  };\n  Action.prototype.set = function set(v) {\n    this.current = v;\n    return this;\n  };\n  Action.prototype.getProp = function getProp(key) {\n    return this.props[key];\n  };\n  Action.prototype.getVelocity = function getVelocity() {\n    return (0, _calc.speedPerSecond)(this.current - this.prev, this.lastUpdated);\n  };\n  Action.prototype.isActive = function isActive() {\n    return this._isActive;\n  };\n  Action.prototype.addListener = function addListener(listener) {\n    this.listeners = this.listeners || [];\n    this.numListeners = this.numListeners || 0;\n    if (this.listeners.indexOf(listener) === -1) {\n      this.listeners.push(listener);\n      this.numListeners++;\n    }\n    return this;\n  };\n  Action.prototype.removeListener = function removeListener(listener) {\n    var listenerIndex = this.listeners ? this.listeners.indexOf(listener) : -1;\n    if (listenerIndex !== -1) {\n      this.numListeners--;\n      this.listeners.splice(listenerIndex, 1);\n    }\n    return this;\n  };\n  Action.prototype.fireListeners = function fireListeners() {\n    var current = this.get();\n    for (var i = 0; i < this.numListeners; i++) {\n      this.listeners[i](current, this);\n    }\n    return this;\n  };\n  return Action;\n}();\nexports.default = Action;","map":{"version":3,"mappings":"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","names":["Action","props","_classCallCheck","scheduledUpdate","_this","lastUpdated","prev","current","onUpdate","passive","update","registerAction","set","get","fireListeners","_isActive","isActionComplete","complete","constructor","defaultProps","setProps","from","start","onStart","_onStart","stop","onStop","_onStop","onComplete","_onComplete","output","func","transform","getBeforeTransform","v","getProp","key","getVelocity","isActive","addListener","listener","listeners","numListeners","indexOf","push","removeListener","listenerIndex","splice","i"],"sources":["/Users/gunhaar/Desktop/441proj/moodmixx/node_modules/popmotion/src/actions/index.js"],"sourcesContent":["import { onFrameUpdate, cancelOnFrameUpdate, timeSinceLastFrame } from 'framesync';\nimport { speedPerSecond } from '../inc/calc';\n\nclass Action { // lawsuit - sorry\n  constructor(props = {}) {\n    this.props = {\n      ...this.constructor.defaultProps\n    };\n\n    this.setProps(props);\n\n    this.lastUpdated = 0;\n    this.prev = this.current = props.current || props.from || 0;\n  }\n\n  start() {\n    const { onStart, _onStart, passive } = this.props;\n\n    if (!passive) {\n      this._isActive = true;\n      onFrameUpdate(this.scheduledUpdate);\n    }\n\n    if (this.onStart) this.onStart();\n    if (onStart) onStart(this);\n    if (_onStart) _onStart(this);\n\n    return this;\n  }\n\n  stop() {\n    const { onStop, _onStop, passive } = this.props;\n\n    if (!passive) {\n      this._isActive = false;\n      cancelOnFrameUpdate(this.scheduledUpdate);\n    }\n\n    if (this.onStop) this.onStop();\n    if (onStop) onStop(this);\n    if (_onStop) _onStop(this);\n\n    return this;\n  }\n\n  complete() {\n    const { onComplete, _onComplete } = this.props;\n\n    this.stop();\n\n    if (this.onComplete) this.onComplete();\n    if (onComplete) onComplete(this);\n    if (_onComplete) _onComplete(this);\n\n    return this;\n  }\n\n  scheduledUpdate = () => {\n    this.lastUpdated = timeSinceLastFrame();\n    this.prev = this.current;\n\n    const { onUpdate, passive } = this.props;\n\n    if (this.update) {\n      this.current = this.update(this.current);\n    }\n\n    if (onUpdate) {\n      if (onUpdate.registerAction) {\n        onUpdate.set(this.get());\n      } else {\n        onUpdate(this.get(), this);\n      }\n    }\n\n    this.fireListeners();\n\n    if (!passive && this._isActive) {\n      onFrameUpdate(this.scheduledUpdate);\n    }\n\n    if (this.isActionComplete && this.isActionComplete()) {\n      this.complete();\n    }\n\n    return this;\n  };\n\n  setProps({ onUpdate, ...props }) {\n    this.props = {\n      ...this.props,\n      ...props\n    };\n\n    if (onUpdate) this.output(onUpdate);\n\n    return this;\n  }\n\n  output(func) {\n    this.props.onUpdate = func;\n    if (func.registerAction) func.registerAction(this);\n\n    return this;\n  }\n\n  get() {\n    const { transform } = this.props;\n    return transform ? transform(this.current) : this.current;\n  }\n\n  getBeforeTransform() {\n    return this.current;\n  }\n\n  set(v) {\n    this.current = v;\n    return this;\n  }\n\n  getProp(key) {\n    return this.props[key];\n  }\n\n  getVelocity() {\n    return speedPerSecond(this.current - this.prev, this.lastUpdated);\n  }\n\n  isActive() {\n    return this._isActive;\n  }\n\n  addListener(listener) {\n    this.listeners = this.listeners || [];\n    this.numListeners = this.numListeners || 0;\n    if (this.listeners.indexOf(listener) === -1) {\n      this.listeners.push(listener);\n      this.numListeners++;\n    }\n    return this;\n  }\n\n  removeListener(listener) {\n    const listenerIndex = (this.listeners) ? this.listeners.indexOf(listener) : -1;\n    if (listenerIndex !== -1) {\n      this.numListeners--;\n      this.listeners.splice(listenerIndex, 1);\n    }\n    return this;\n  }\n\n  fireListeners() {\n    const current = this.get();\n    for (let i = 0; i < this.numListeners; i++) {\n      this.listeners[i](current, this);\n    }\n    return this;\n  }\n}\n\nexport default Action;\n"]},"metadata":{},"sourceType":"script"}