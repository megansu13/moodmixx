{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\nvar _ = require('./');\nvar _2 = _interopRequireDefault(_);\nvar _framesync = require('framesync');\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n} /*\n    The closed-form damped harmonic oscillating spring.\n    Or, spring.\n  \n    This is a direct port of Adam Miskiewicz's (@skevy) React Animated\n    PR #15322 https://github.com/facebook/react-native/pull/15322/\n  \n    ```\n    spring({\n      mass: 2,\n      damping: 10,\n      stiffness: 100,\n      to: 100\n    }).start();\n    ```\n  \n    Adam Miskiewicz:\n    @skevy (twitter.com/skevy, github.com/skevy)\n   */\n\nvar Spring = function (_Action) {\n  _inherits(Spring, _Action);\n  function Spring() {\n    _classCallCheck(this, Spring);\n    return _possibleConstructorReturn(this, _Action.apply(this, arguments));\n  }\n  Spring.prototype.onStart = function onStart() {\n    var _props = this.props,\n      velocity = _props.velocity,\n      to = _props.to,\n      from = _props.from;\n    this.t = 0;\n    this.initialVelocity = velocity ? velocity / 1000 : 0.0;\n    this.isComplete = false;\n    this.delta = to - from;\n  };\n  Spring.prototype.update = function update() {\n    var _props2 = this.props,\n      stiffness = _props2.stiffness,\n      damping = _props2.damping,\n      mass = _props2.mass,\n      from = _props2.from,\n      to = _props2.to,\n      restSpeed = _props2.restSpeed,\n      restDisplacement = _props2.restDisplacement;\n    var delta = this.delta,\n      initialVelocity = this.initialVelocity;\n    var timeDelta = (0, _framesync.timeSinceLastFrame)() / 1000;\n    var t = this.t = this.t + timeDelta;\n    var dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    var angularFreq = Math.sqrt(stiffness / mass);\n    var expoDecay = angularFreq * Math.sqrt(1.0 - dampingRatio * dampingRatio);\n    var x0 = 1;\n    var oscillation = 0.0;\n\n    // Underdamped\n    if (dampingRatio < 1) {\n      var envelope = Math.exp(-dampingRatio * angularFreq * t);\n      oscillation = envelope * ((initialVelocity + dampingRatio * angularFreq * x0) / expoDecay * Math.sin(expoDecay * t) + x0 * Math.cos(expoDecay * t));\n      this.velocity = envelope * (Math.cos(expoDecay * t) * (initialVelocity + dampingRatio * angularFreq * x0) - expoDecay * x0 * Math.sin(expoDecay * t)) - dampingRatio * angularFreq * envelope * (Math.sin(expoDecay * t) * (initialVelocity + dampingRatio * angularFreq * x0) / expoDecay + x0 * Math.cos(expoDecay * t));\n\n      // Critically damped\n    } else {\n      var _envelope = Math.exp(-angularFreq * t);\n      oscillation = _envelope * (x0 + (initialVelocity + angularFreq * x0) * t);\n      this.velocity = _envelope * (t * initialVelocity * angularFreq - t * x0 * (angularFreq * angularFreq) + initialVelocity);\n    }\n    var fraction = 1 - oscillation;\n    var position = from + fraction * delta;\n\n    // Check if simulation is complete\n    // We do this here instead of `isActionComplete` as it allows us\n    // to clamp to end during update)\n    var isBelowVelocityThreshold = Math.abs(this.velocity) <= restSpeed;\n    var isBelowDisplacementThreshold = Math.abs(to - position) <= restDisplacement;\n    this.isComplete = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n    if (this.isComplete) {\n      position = to;\n    }\n    return position;\n  };\n  Spring.prototype.isActionComplete = function isActionComplete() {\n    return this.isComplete;\n  };\n  return Spring;\n}(_2.default);\nSpring.defaultProps = {\n  stiffness: 100,\n  damping: 10,\n  mass: 1.0,\n  velocity: 0.0,\n  from: 0.0,\n  to: 0.0,\n  restSpeed: 0.01,\n  restDisplacement: 0.01\n};\nexports.default = function (props) {\n  return new Spring(props);\n};","map":{"version":3,"mappings":"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","names":["Spring","onStart","props","velocity","to","from","t","initialVelocity","isComplete","delta","update","stiffness","damping","mass","restSpeed","restDisplacement","timeDelta","dampingRatio","Math","sqrt","angularFreq","expoDecay","x0","oscillation","envelope","exp","sin","cos","fraction","position","isBelowVelocityThreshold","abs","isBelowDisplacementThreshold","isActionComplete","defaultProps"],"sources":["/Users/megansu/Desktop/eecs441/moodmixx/moodmixx/node_modules/popmotion/src/actions/spring.js"],"sourcesContent":["/*\n  The closed-form damped harmonic oscillating spring.\n  Or, spring.\n\n  This is a direct port of Adam Miskiewicz's (@skevy) React Animated\n  PR #15322 https://github.com/facebook/react-native/pull/15322/\n\n  ```\n  spring({\n    mass: 2,\n    damping: 10,\n    stiffness: 100,\n    to: 100\n  }).start();\n  ```\n\n  Adam Miskiewicz:\n  @skevy (twitter.com/skevy, github.com/skevy)\n */\nimport Action from './';\nimport { timeSinceLastFrame } from 'framesync';\n\nclass Spring extends Action {\n  static defaultProps = {\n    stiffness: 100,\n    damping: 10,\n    mass: 1.0,\n    velocity: 0.0,\n    from: 0.0,\n    to: 0.0,\n    restSpeed: 0.01,\n    restDisplacement: 0.01\n  };\n\n  onStart() {\n    const { velocity, to, from } = this.props;\n    this.t = 0;\n    this.initialVelocity = velocity ? velocity / 1000 : 0.0;\n    this.isComplete = false;\n    this.delta = to - from;\n  }\n\n  update() {\n    const { stiffness, damping, mass, from, to, restSpeed, restDisplacement } = this.props;\n    const { delta, initialVelocity } = this;\n\n    const timeDelta = timeSinceLastFrame() / 1000;\n    const t = this.t = this.t + timeDelta;\n\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    const angularFreq = Math.sqrt(stiffness / mass);\n    const expoDecay = angularFreq * Math.sqrt(1.0 - (dampingRatio * dampingRatio));\n\n    const x0 = 1;\n    let oscillation = 0.0;\n\n    // Underdamped\n    if (dampingRatio < 1) {\n      const envelope = Math.exp(-dampingRatio * angularFreq * t);\n      oscillation = envelope * (((initialVelocity + dampingRatio * angularFreq * x0) / expoDecay) * Math.sin(expoDecay * t) + (x0 * Math.cos(expoDecay * t)));\n      this.velocity = (envelope * ((Math.cos(expoDecay * t) * (initialVelocity + dampingRatio * angularFreq * x0)) - (expoDecay * x0 * Math.sin(expoDecay * t))) -\n        ((dampingRatio * angularFreq * envelope) * ((((Math.sin(expoDecay * t) * (initialVelocity + dampingRatio * angularFreq * x0)) ) / expoDecay) + (x0 * Math.cos(expoDecay * t)))));\n\n    // Critically damped\n    } else {\n      const envelope = Math.exp(-angularFreq * t);\n      oscillation = envelope * (x0 + (initialVelocity + (angularFreq * x0)) * t);\n      this.velocity = envelope * ((t * initialVelocity * angularFreq) - (t * x0 * (angularFreq * angularFreq)) + initialVelocity);\n    }\n\n    const fraction = 1 - oscillation;\n    let position = from + fraction * delta;\n\n    // Check if simulation is complete\n    // We do this here instead of `isActionComplete` as it allows us\n    // to clamp to end during update)\n    const isBelowVelocityThreshold = Math.abs(this.velocity) <= restSpeed;\n    const isBelowDisplacementThreshold = Math.abs(to - position) <= restDisplacement;\n    this.isComplete = isBelowVelocityThreshold && isBelowDisplacementThreshold;\n\n    if (this.isComplete) {\n      position = to;\n    }\n\n    return position;\n  }\n\n  isActionComplete() {\n    return this.isComplete;\n  }\n}\n\nexport default (props) => new Spring(props);\n"]},"metadata":{},"sourceType":"script"}